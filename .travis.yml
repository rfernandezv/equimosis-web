language: node_js
node_js:
- '8'
before_script:
- npm install -g --silent @angular/cli
script:
  - chmod +x build.sh
  - ./build.sh
  - chmod +x dist
  - chmod +x dist/equimosis-web
# blocklist
branches:
  except:
  - development
# safelist	
branches:	
  only:	
  - master
before_deploy:
- ls
- ls dist
- ls dist/equimosis-web
- sudo cp manifest.yml dist/equimosis-web
- sudo cp Staticfile dist/equimosis-web
- ls dist/equimosis-web
- cd dist/equimosis-web
deploy:
  - provider: cloudfoundry
    skip_cleanup: true
    username: richar.fernandezv@gmail.com
    password: 
      secure: "ojoYUnBUUKJqMFHBMzROFF0gxaX1WVSjNBRrdfPWNFYrvKLlB6aFE8gL51SFXw1BZZ59K7lwh9ANSjUh4X2FinnFTTI5EPTsltx8qpthu8W3b+YTP/dUWZFPgfMSIzLyHlr0iLZuc3z6bpUWBdcTslrFWNjZFWR/Hqu62vqlWBZnTk+H4+iScB4+lFSe1QYDURIEETrcGLNtbyJgnQ0+HzB1uymi6ie7Z0PDw439E4aHg95RymemTxNg6ZxgZk6XlxkpvIHkOEnzwiRYwmVQI15TFHr+Q2OYnGIVMWP4m7RI3xnMDqmAlpoMF3n4zQrKNyOnRQzN8gfuxIjKQHiSi9FEmW64H7jCbpsdmWRBGNFHTG90C+35fFze+aNWdvd7d01y4nDLZmdrs3eQFiP8txjUmXpwbX78D9yvPVJWx0eHWybUwx5zPwVBRh+72jQoetf7DD8LD81VXA/tBCRho42E6lo+wuN2vGtD6DbijjCXZqU1eqB4jUBdQO4iidPczY7h3F6TLz8rOvxRvNnmqcoSxEcc3NsY3so5f53galGKo4GaTpbiCx00Iwg9W9Li2rle1HGTnE9btB+nlXZxHfrWopRiR7ZZb0JmsxYYQ6ME92XTRHmAHtLY8YCEsSSKo/wfMAmj77DT4G7LYWT6pFJSnIaWCQ+xgJrbPJlRfv4="
    api: https://api.run.pivotal.io
    organization: rfernandezvilchez
    space: development
    on:
        branch: master
notifications:
  email:
    on_failure: change
    on_success: change
